# A-mini_spaceship_game
A mini space invader game implemented on ZYBO board
Require
-------
ZYBO which is provided by Xilinx. 
vivado 2016.2.
VGA cable and micro_usb cable.

How the code is organized:
--------
	The module vgacontroller(Space_incaders.v) should be set as the top module, 
  and this module has instanced those necessary sub_modules such as debounce, 
  spaceship, rocket, ect.
  
module vgacontroller:
#
	There are rst, clk, btnR, btnL, fire, startbtn as inputs. 
	I set rst port to G15(which has been set in constraints.xdc);
	clk is set to L16 which is the clock generated by the crystal oscillator of ZYBO board;
	btnL is set to Y16, and this signal is used to control the spaceship to move towards left, 
  btnL is also the input of module spaceship. When spaceship(the x coordinate of spaceship) hasn’t reached the left side
  (spaceship is bigger than 11), the spaceship will move 1 pix per clk.
	btnR is set to V16, and the function of btnR is the same as btnL, the only difference is btnR controls spaceship to move right.
	fire is set to P16, which is used to control the spaceship to fire.
	And the main function of this module is to control the VGA output, you can find the VGA protocol here:
https://en.wikipedia.org/wiki/Video_Graphics_Array
	This module also defines the mechanism of how the aliens move, how the aliens fire,
  where the board is, when to display the results pictures, etc. 
  If you are interested in creating your own game mode or level of difficulty, you can change this module to whatever you like.

module horizontal:
#
	This module is based on the VGA protocol, and has decided how is each row scanned, 
  this is decided by which form of VGA output you use, 
  you should change the clock frequency in order to meet the requirement of VGA protocol.

module vertical:
#
	This module is very similar as the horizontal module, 
  the only difference is that vertical is used to control field scanning, 
  and the horizontal module is used to control row scanning.

module debounce:
#
	This module is used to generate the suitable btnL, btnR, fire signal. 
  And you can change the speed and fire speed of the spaceship by change the value of DELAY1.

module spaceship:
#
	This module describes the defalut position of spaceship, 
  and how the spaceship moves, and in what kind of situation the aliens hit the spaceship. 
  It also defines how many lives do you left(I define the default number of lives to 2, you can change it if you want).

module rocket:
#
	This module mainly defines how the aliens are hit and gone.

module speaker:
#
This module was intended to generate a sound output when the bullet hit the spaceship or the aliens, 
but I didn’t find a way to make it happen on the board, I may try to realize this later if I have time.

module alien:
#
This module decides the fire frequency of aliens and the state of aliens, 
it also defines whether the alien is alive and how the aliens move

module Pulse:
#
This module uses a simple FSM to generate a pulse which is used to match the btnL, btnR, fire, etc. 
Output pulse will be set to 1’b1 when count reach 200000, that means under a 50MHZ clock, 
the output will generate a pulse every 0.004 second.

Pictures preparation:
----------------
Xilinx vivado offer a method to store static picture in RAMs or ROMs. 
In order to use the ip Block Memory Generator, we need to create an array in .coe format. 
This can be learned by this blog which has implemented a static picture VGA display function.
https://blog.csdn.net/rzjmpb/article/details/49914197
	Blk_mem_gen_0~7 is used to initialize the start scene, background, three kinds of aliens, spaceship and win or game over result. 
  The BMG ip provided by vivado will be realized by the on-chip BRAM. 
  And I have chosen the single port RAM, because we just need to read data from the RAM and don’t need to change the data. 

Generate the clock:
-----------------
	In the beginning, I have written a clk division module, and a clk double module to generate the 25MHZ and 50MHZ clock. 
  But I find it doesn’t work well, so I use the Clock wizard provided by vivado, and instantiated it in the vgacontroller module.

Change the constrains:
-----------
	When you have understood the meaning of inputs and outputs, you can assign them to the ports on ZYBO board according to the “ZYBO FPGA Board Reference Manual”. 
  And you should change the constrains if it encounters timing problems. 
	Attention: you are not required to change the input and output delay, because vivado will do this automatically for you.

Demostration:
 

